function entityreference_field_widget_form(a,b,c,d,e,f,g,h){try{switch(d.widget.type){case"entityreference_autocomplete":case"entityreference_autocomplete_tags":case"og_complex":var i=entity_primary_key_title(c.settings.target_type);f[g].type="autocomplete",f[g].delta=g,f[g].element_id=h.id,f[g].cardinality=c.cardinality,f[g].langcode=e,f[g].remote=!0,f[g].value=entity_primary_key(c.settings.target_type),f[g].label=i,f[g].filter=i,f[g].path=entityreference_autocomplete_path(c,f[g]),f[g].item&&f[g].item.target_id&&(f[g].default_value=f[g].item.target_id,f[g].default_value_label=f[g].item[i]);break;default:console.log("entityreference_field_widget_form - unknown widget type ("+d.widget.type+")")}}catch(j){console.log("entityreference_field_widget_form - "+j)}}function entityreference_field_formatter_view(a,b,c,d,e,f,g){try{var h={};return $.each(f,function(a,b){switch(g.type){case"entityreference_label":var c=b[entity_primary_key_title(b.entity_type)];if(1==g.settings.link){var d=b.entity_type;in_array(d,["taxonomy_term","taxonomy_vocabulary"])&&(d=d.replace("_","/")),h[a]={theme:"button_link",text:c,path:d+"/"+b.target_id}}else h[a]={markup:"<div>"+c+"</div>"};break;case"entityreference_entity_id":h[a]={markup:"<div>"+b.target_id+"</div>"};break;case"entityreference_entity_view":drupalgap_entity_render_content(b.entity_type,b.entity),h[a]={markup:b.entity.content};break;default:console.log("entityreference_field_formatter_view - unsupported type: "+g.type)}}),h}catch(i){console.log("entityreference_field_formatter_view - "+i)}}function entityreference_get_target_bundles(a){try{var b=[];for(var c in a.handler_settings.target_bundles)if(a.handler_settings.target_bundles.hasOwnProperty(c)){var d=(a.handler_settings.target_bundles[c],entityreference_get_bundle_and_name_from_field_settings(c,a));d.bundle&&b.push(d.bundle)}return b.length?b:null}catch(e){console.log("entityreference_get_target_bundles - "+e)}}function entityreference_get_bundle_and_name_from_field_settings(a,b){var c={bundle_name:null,bundle:null};switch(b.target_type){case"node":c.bundle_name="type",c.bundle=a;break;case"taxonomy_term":c.bundle_name="vid",c.bundle=taxonomy_vocabulary_get_vid_from_name(a)}return c}function entityreference_assemble_form_state_into_field(a,b,c,d,e,f,g,h){try{if(void 0===c)return null;var i=null;switch(e.widget.type){case"entityreference_autocomplete":case"og_complex":h.value="target_id",""==c?i="":empty(c)||(i="... ("+c+")");break;default:i=[],h.use_delta=!1,h.use_wrapper=!1;var j=c.split(",");$.each(j,function(a,b){empty(b)||i.push(b)})}return i}catch(k){console.log("entityreference_assemble_form_state_into_field - "+k)}}function entityreference_views_exposed_filter(a,b,c,d,e){try{c.type="select",c.options={};for(var f in d.value_options)d.value_options.hasOwnProperty(f)&&(c.options[f]=d.value_options[f]);return c.required||(c.options.All="- "+t("Any")+" -",void 0===c.value&&(c.value="All")),empty(d.value)||(c.value=d.value[0]),c}catch(g){console.log("entityreference_views_exposed_filter - "+g)}}function theme_entityreference(a){try{var b="",c=a.field_info_field.field_name,d=null,e=null;if(void 0!==a.field_info_instance.settings.behaviors)for(e in a.field_info_instance.settings.behaviors)if(a.field_info_instance.settings.behaviors.hasOwnProperty(e)){var f=a.field_info_instance.settings.behaviors[e];if(f.status){e=e.replace(/-/g,"_"),e=e.replace("taxonomy","taxonomy_term"),d=e.replace("_index","");break}}b+='<div id="'+a.attributes.id+'_container"></div>';var g=a.field_info_field.settings.handler;switch(g){case"views":case"og":case"base":var h=entityreference_autocomplete_path(a.field_info_field);b+=drupalgap_jqm_page_event_script_code({page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",jqm_page_event_callback:"_theme_entityreference_pageshow",jqm_page_event_args:JSON.stringify({id:a.attributes.id,path:h,widget:a.field_info_instance.widget,field_name:c,entity_type:d,entity_type_index:e,bundles:entityreference_get_target_bundles(a.field_info_field.settings),cardinality:a.field_info_field.cardinality})});break;default:console.log("WARNING: theme_entityreference - unsupported handler ("+g+")")}return b}catch(i){console.log("theme_entityreference - "+i)}}function _theme_entityreference_pageshow(a){try{var b=function(b){try{var c=[];if(b){var d="und";void 0!==b.language&&"und"!=b.language&&(d=b.language,void 0===b[a.field_name][d]&&(d="und")),$.isArray(b[a.field_name])&&0==b[a.field_name].length||($.each(b[a.field_name][d],function(a,b){c.push(b.target_id)}),c.length>0&&$("#"+a.id).val(c.join(",")))}var e=entity_primary_key(a.entity_type),f=entity_primary_key_title(a.entity_type),g=a.bundles,h={orderby:{}};h.orderby[f]="asc";var i={parameters:{},fields:[e,f],options:h};g&&(i.parameters[entity_get_bundle_name(a.entity_type)]=g.join(",")),window[a.entity_type_index](i,{success:function(b){if(b&&0!=b.length){for(var d="",g=null,h=a.field_name+" entityreference",i=0;i<b.length;i++){var j=b[i];switch(a.widget.module){case"options":switch(a.widget.type){case"options_select":g||(g={}),g[j[e]]=j[f];break;case"options_buttons":if(1==a.cardinality)g||(g={}),g[j[e]]=j[f];else{var k=a.id+"_"+j[e],l={title:j[f],attributes:{id:k,class:h,value:j[e],onclick:"_entityreference_onclick(this, '"+a.id+"', '"+a.field_name+"')"}};-1!=$.inArray(j[e],c)&&(l.attributes.checked="");var m={element:l};m.element.id=l.attributes.id,d+=theme("checkbox",l)+theme("form_element_label",m)}break;default:console.log("WARNING: _theme_entityreference_pageshow - unsupported options widget type ("+a.widget.type+")")}break;case"entityreference":case"og":break;default:console.log("WARNING: _theme_entityreference_pageshow - unsupported widget module ("+a.widget.module+")")}}"options_select"==a.widget.type&&g?d+=theme("select",{attributes:{id:a.id,class:h},options:g,value:c.join(",")}):"options_buttons"==a.widget.type&&(1==a.cardinality&&g&&(d+=theme("radios",{attributes:{id:a.id,class:h,onclick:"_entityreference_onclick(this, '"+a.id+"', '"+a.field_name+"')"},options:g,value:c.join(",")})),d=theme("hidden",{attributes:{id:a.id,value:c.join(",")}})+d),$("#"+a.id+"_container").html(d).trigger("create")}}})}catch(j){console.log("_theme_entityreference_pageshow_success - "+j)}};"number"==typeof parseInt(arg(1))&&"edit"==arg(2)?entity_load(arg(0),arg(1),{success:b}):b(null)}catch(c){console.log("_theme_entityreference_pageshow - "+c)}}function _entityreference_onclick(a,b,c){try{var d=[],e="#"+drupalgap_get_page_id()+" input."+c+".entityreference";$(e).each(function(a,b){$(b).is(":checked")&&d.push($(b).val())});var f="";0!=d.length&&(f=d.join(",")),$("#"+b).val(f)}catch(g){console.log("_entityreference_onclick - "+g)}}function entityreference_autocomplete_path(a){try{switch(a.settings.handler){case"views":return Drupal.settings.endpoint+"/"+a.settings.handler_settings.view.view_name+"/"+a.settings.handler_settings.view.display_name;case"base":case"og":return arguments[1]&&(arguments[1].custom=!0),Drupal.settings.endpoint+"/"+a.settings.target_type+".json"}}catch(b){console.log("entityreference_autocomplete_path - "+b)}}